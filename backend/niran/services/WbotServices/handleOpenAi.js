const a797_0x31d72b=a797_0x43a2;(function(_0x267c9e,_0x5a89f5){const _0x1b494d=a797_0x43a2,_0x42d0f5=_0x267c9e();while(!![]){try{const _0x14aaf4=parseInt(_0x1b494d(0x151))/0x1+-parseInt(_0x1b494d(0x12f))/0x2*(parseInt(_0x1b494d(0x209))/0x3)+-parseInt(_0x1b494d(0x1ba))/0x4+-parseInt(_0x1b494d(0x12a))/0x5+-parseInt(_0x1b494d(0xe2))/0x6*(parseInt(_0x1b494d(0x1bc))/0x7)+parseInt(_0x1b494d(0x17c))/0x8*(parseInt(_0x1b494d(0x154))/0x9)+-parseInt(_0x1b494d(0x1a8))/0xa*(-parseInt(_0x1b494d(0x207))/0xb);if(_0x14aaf4===_0x5a89f5)break;else _0x42d0f5['push'](_0x42d0f5['shift']());}catch(_0x50c951){_0x42d0f5['push'](_0x42d0f5['shift']());}}}(a797_0xaa5f,0x2f483));const a797_0x408402=(function(){const _0x3acd4d=a797_0x43a2,_0x4823ef={};_0x4823ef[_0x3acd4d(0xc5)]=function(_0x554ec5,_0x58d41f){return _0x554ec5===_0x58d41f;},_0x4823ef[_0x3acd4d(0x1b6)]=_0x3acd4d(0x20f),_0x4823ef['IwBRH']='ihPDi',_0x4823ef[_0x3acd4d(0x185)]='IWdWe',_0x4823ef['sWjzn']=_0x3acd4d(0x1d5),_0x4823ef[_0x3acd4d(0x1bd)]=_0x3acd4d(0x1f6);const _0x380bcf=_0x4823ef;let _0x3a28b0=!![];return function(_0x345ce7,_0x4afb84){const _0xc4f448=_0x3acd4d,_0x8fe68f={'iXNLQ':function(_0x44eaad,_0x37455a){return _0x380bcf['sMkoo'](_0x44eaad,_0x37455a);},'pJbIA':_0x380bcf[_0xc4f448(0x1b6)],'UmeQT':function(_0x4618bf,_0x367179){return _0x380bcf['sMkoo'](_0x4618bf,_0x367179);},'UIdMj':_0x380bcf[_0xc4f448(0x1aa)],'hKpVd':_0x380bcf[_0xc4f448(0x185)],'PjQev':function(_0x4e1531,_0x23ab8b){return _0x4e1531+_0x23ab8b;},'TzmzO':_0xc4f448(0xdc),'Tboma':_0x380bcf['sWjzn'],'XWmmH':_0x380bcf['jkKho']};if(_0xc4f448(0x17f)!==_0xc4f448(0xbd)){const _0x3c4231=_0x3a28b0?function(){const _0x564d6b=_0xc4f448;if(_0x8fe68f[_0x564d6b(0x210)](_0x8fe68f[_0x564d6b(0x130)],_0x564d6b(0x160)))return;else{if(_0x4afb84){if(_0x8fe68f[_0x564d6b(0x10f)](_0x8fe68f[_0x564d6b(0x139)],_0x8fe68f[_0x564d6b(0x1b8)])){const _0x34772b=_0x16f611[_0x564d6b(0x17a)]['prototype'][_0x564d6b(0xc3)](_0x466a7a),_0x4d091b=_0x58b0ba[_0x3f98ac],_0x3965eb=_0x10325d[_0x4d091b]||_0x34772b;_0x34772b[_0x564d6b(0x228)]=_0x1c92d3[_0x564d6b(0xc3)](_0x716679),_0x34772b['toString']=_0x3965eb[_0x564d6b(0x21e)]['bind'](_0x3965eb),_0x3390a6[_0x4d091b]=_0x34772b;}else{const _0x498549=_0x4afb84[_0x564d6b(0x13d)](_0x345ce7,arguments);return _0x4afb84=null,_0x498549;}}}}:function(){};return _0x3a28b0=![],_0x3c4231;}else(function(){return![];}[_0xc4f448(0x17a)](_0x8fe68f['PjQev'](_0x8fe68f['TzmzO'],_0x8fe68f['Tboma']))['apply'](_0x8fe68f[_0xc4f448(0x120)]));};}()),a797_0x460b84=a797_0x408402(this,function(){const _0xe698f0=a797_0x43a2;return a797_0x460b84[_0xe698f0(0x21e)]()['search'](_0xe698f0(0xf0))[_0xe698f0(0x21e)]()['constructor'](a797_0x460b84)[_0xe698f0(0x225)](_0xe698f0(0xf0));});a797_0x460b84();const a797_0x388873=(function(){const _0x575bd7=a797_0x43a2,_0x5b94db={};_0x5b94db[_0x575bd7(0xf4)]=_0x575bd7(0x127),_0x5b94db[_0x575bd7(0x174)]=_0x575bd7(0x133),_0x5b94db[_0x575bd7(0xce)]=function(_0x406cdb,_0x324e64){return _0x406cdb===_0x324e64;},_0x5b94db[_0x575bd7(0xde)]=function(_0x569a42,_0x289f35){return _0x569a42===_0x289f35;},_0x5b94db[_0x575bd7(0x18e)]=_0x575bd7(0x216);const _0x55f238=_0x5b94db;let _0x5980d0=!![];return function(_0x29589e,_0x2b0eca){const _0x59f585=_0x575bd7,_0x5bde26={'mxZPd':_0x55f238[_0x59f585(0xf4)],'pOAbY':'IkAZY','hjVPn':_0x55f238[_0x59f585(0x174)],'Stqmn':function(_0x129aea,_0x4a5622){return _0x55f238['BlHAH'](_0x129aea,_0x4a5622);},'VYliZ':'EoIil'};if(_0x55f238[_0x59f585(0xde)](_0x55f238[_0x59f585(0x18e)],_0x59f585(0x176))){if(_0xe903b0){const _0x37293e=_0x512db8[_0x59f585(0x13d)](_0x24e4ea,arguments);return _0x1da31d=null,_0x37293e;}}else{const _0x3edf66=_0x5980d0?function(){const _0x4de4c8=_0x59f585,_0x4f5888={};_0x4f5888[_0x4de4c8(0x11b)]=_0x5bde26['mxZPd'],_0x4f5888[_0x4de4c8(0x152)]='counter';const _0x518936=_0x4f5888;if(_0x5bde26[_0x4de4c8(0x11e)]!==_0x5bde26[_0x4de4c8(0x1e8)]){if(_0x2b0eca){if(_0x5bde26['Stqmn'](_0x5bde26[_0x4de4c8(0x102)],_0x5bde26[_0x4de4c8(0x102)])){const _0x4c9dcb=_0x2b0eca[_0x4de4c8(0x13d)](_0x29589e,arguments);return _0x2b0eca=null,_0x4c9dcb;}else _0x32f186[_0x4de4c8(0x157)]['unlinkSync'](_0x2c5c46);}}else return function(_0x414870){}['constructor'](_0x518936[_0x4de4c8(0x11b)])[_0x4de4c8(0x13d)](_0x518936['MeGcw']);}:function(){};return _0x5980d0=![],_0x3edf66;}};}());(function(){const _0x2fd398=a797_0x43a2,_0x5be902={'JnnUu':_0x2fd398(0x143),'OKvHQ':function(_0x23381e,_0x555d68){return _0x23381e(_0x555d68);},'YLfTn':'init','bGOVb':function(_0x503f8b,_0x265314){return _0x503f8b+_0x265314;},'TFGeN':'input','pRLdc':function(_0x3f66bd,_0x180fa0){return _0x3f66bd(_0x180fa0);},'EncfK':function(_0x49d8f1){return _0x49d8f1();},'knzwE':function(_0x1e44da,_0x1b1540){return _0x1e44da!==_0x1b1540;},'tTHRx':_0x2fd398(0xd5),'zXbIm':_0x2fd398(0xcf),'xzsWX':function(_0x29bbac,_0x1a3e05){return _0x29bbac!==_0x1a3e05;},'CNOHS':_0x2fd398(0x203),'fkITi':function(_0x59769f,_0x39a95f){return _0x59769f(_0x39a95f);},'crRJE':_0x2fd398(0xea),'GkElh':'NTLcD','GIfhf':function(_0x2f3f55){return _0x2f3f55();}};a797_0x388873(this,function(){const _0x11f6b4=_0x2fd398;if(_0x5be902[_0x11f6b4(0x13c)](_0x5be902['tTHRx'],_0x5be902[_0x11f6b4(0xc6)]))return!![];else{const _0x5ee0e3=new RegExp(_0x5be902[_0x11f6b4(0xca)]),_0x1440ce=new RegExp(_0x11f6b4(0x11f),'i'),_0x1ca02a=_0x5be902[_0x11f6b4(0x1e4)](a797_0x2eed38,_0x5be902[_0x11f6b4(0xeb)]);if(!_0x5ee0e3[_0x11f6b4(0x1a3)](_0x5be902['bGOVb'](_0x1ca02a,_0x5be902['zXbIm']))||!_0x1440ce[_0x11f6b4(0x1a3)](_0x1ca02a+_0x11f6b4(0xec))){if(_0x5be902[_0x11f6b4(0x128)](_0x5be902['CNOHS'],_0x11f6b4(0x203))){const _0xab5245=new _0x454dd6(_0x5be902[_0x11f6b4(0xca)]),_0x350658=new _0x189a13(_0x11f6b4(0x11f),'i'),_0x400225=_0x5be902[_0x11f6b4(0xf5)](_0x43227e,_0x5be902[_0x11f6b4(0xeb)]);!_0xab5245['test'](_0x5be902['bGOVb'](_0x400225,_0x11f6b4(0xcf)))||!_0x350658[_0x11f6b4(0x1a3)](_0x5be902[_0x11f6b4(0x211)](_0x400225,_0x5be902['TFGeN']))?_0x5be902[_0x11f6b4(0x1e4)](_0x400225,'0'):_0x5be902[_0x11f6b4(0x1a1)](_0x3776a6);}else _0x5be902[_0x11f6b4(0x164)](_0x1ca02a,'0');}else{if(_0x5be902['knzwE'](_0x5be902[_0x11f6b4(0x136)],_0x5be902[_0x11f6b4(0x107)]))_0x5be902[_0x11f6b4(0x19c)](a797_0x2eed38);else{const _0x2db6f0=_0x214614['apply'](_0x2970be,arguments);return _0x1aabc0=null,_0x2db6f0;}}}})();}());const a797_0x4184a8=(function(){const _0x3bbd97=a797_0x43a2,_0x57714b={'dVvGK':function(_0x5d509c){return _0x5d509c();},'vhKWK':function(_0x3bf64f,_0x613af2){return _0x3bf64f!==_0x613af2;},'OufYT':_0x3bbd97(0x1c9),'aumWC':function(_0x167928,_0x142895){return _0x167928===_0x142895;},'ndQbm':_0x3bbd97(0x1cc),'JdsWZ':function(_0x159f91,_0x5e20f1){return _0x159f91===_0x5e20f1;},'nROjx':_0x3bbd97(0x15f)};let _0xd0ed45=!![];return function(_0x19453c,_0x609bf1){const _0x4c8d25=_0x3bbd97,_0x4c54a8={'XjmMs':_0x4c8d25(0xd2),'EWbWf':function(_0x404d3d,_0x546a87){return _0x57714b['vhKWK'](_0x404d3d,_0x546a87);},'BTzTD':_0x4c8d25(0x124),'wyiMH':_0x57714b[_0x4c8d25(0xdd)],'oSfrQ':function(_0x523168,_0x49e177){const _0xd8106a=_0x4c8d25;return _0x57714b[_0xd8106a(0x1d6)](_0x523168,_0x49e177);},'QNFZl':_0x57714b[_0x4c8d25(0xd9)],'altid':_0x4c8d25(0x19f)};if(_0x57714b[_0x4c8d25(0x1fd)](_0x57714b['nROjx'],_0x57714b['nROjx'])){const _0x58801c=_0xd0ed45?function(){const _0x32535e=_0x4c8d25,_0x4c0d5f={};_0x4c0d5f[_0x32535e(0x1b9)]=_0x4c54a8[_0x32535e(0x21a)];const _0x281545=_0x4c0d5f;if(_0x4c54a8[_0x32535e(0xcc)](_0x4c54a8[_0x32535e(0x189)],_0x4c54a8[_0x32535e(0x101)])){if(_0x609bf1){if(_0x4c54a8['oSfrQ'](_0x4c54a8[_0x32535e(0x15c)],_0x4c54a8[_0x32535e(0x175)]))try{_0x17cd5e[_0x32535e(0x157)][_0x32535e(0x110)](_0x2c39cb);}catch(_0x352b9c){_0x4a89c9[_0x32535e(0xbf)](_0x281545[_0x32535e(0x1b9)],_0x352b9c);}else{const _0x2ab665=_0x609bf1[_0x32535e(0x13d)](_0x19453c,arguments);return _0x609bf1=null,_0x2ab665;}}}else return;}:function(){};return _0xd0ed45=![],_0x58801c;}else _0x57714b['dVvGK'](_0x295143);};}()),a797_0x5498a2=a797_0x4184a8(this,function(){const _0x33e93a=a797_0x43a2,_0x206ab7={'qfAmJ':function(_0x2a0e9e,_0x543f65){return _0x2a0e9e(_0x543f65);},'ZBAan':_0x33e93a(0xbf),'pideA':function(_0x194524,_0x2b56c1){return _0x194524!==_0x2b56c1;},'SJglG':_0x33e93a(0x16c),'MsGsk':_0x33e93a(0x21d),'xlVTd':function(_0x2ab2e4,_0x3a058d){return _0x2ab2e4+_0x3a058d;},'wZhen':_0x33e93a(0x1c7),'EaFxV':function(_0x3389bf){return _0x3389bf();},'hkicz':'AqpVz','zcgUQ':'warn','XOTlw':_0x33e93a(0x213),'tkFLJ':_0x33e93a(0x16b),'bzfbr':_0x33e93a(0x18b),'Rdwuq':_0x33e93a(0xbe),'ZUIkz':function(_0x88f881,_0x4d56f2){return _0x88f881<_0x4d56f2;},'skEiL':_0x33e93a(0x1af)};let _0x53b806;try{if(_0x206ab7['pideA'](_0x206ab7['SJglG'],_0x206ab7[_0x33e93a(0x1be)])){const _0x3f373a=Function(_0x206ab7['xlVTd'](_0x206ab7['wZhen']+_0x33e93a(0x19e),');'));_0x53b806=_0x206ab7[_0x33e93a(0x1ab)](_0x3f373a);}else _0x206ab7[_0x33e93a(0x1f5)](_0x3a7e77,0x0);}catch(_0x32da20){_0x206ab7[_0x33e93a(0x126)]===_0x206ab7['hkicz']?_0x53b806=window:(0x0,_0x162455[_0x33e93a(0x157)])()[_0x33e93a(0xec)](_0x3190ce)[_0x33e93a(0x199)](_0x3a85f7)['on'](_0x33e93a(0x1e9),()=>_0x481790(_0xbf5b41))['on'](_0x206ab7[_0x33e93a(0x182)],_0x1529cc=>_0x168f07(new _0x370c93(_0x33e93a(0x1ee)+_0x1529cc[_0x33e93a(0xdf)])))['save'](_0xbaa3cb);}const _0x56c156=_0x53b806['console']=_0x53b806[_0x33e93a(0x20c)]||{},_0x527ad8=[_0x33e93a(0x118),_0x206ab7['zcgUQ'],_0x206ab7[_0x33e93a(0x1d8)],_0x206ab7[_0x33e93a(0x182)],_0x206ab7[_0x33e93a(0x1da)],_0x206ab7[_0x33e93a(0x14b)],_0x206ab7[_0x33e93a(0xbb)]];for(let _0x10d0df=0x0;_0x206ab7[_0x33e93a(0x18d)](_0x10d0df,_0x527ad8[_0x33e93a(0xe3)]);_0x10d0df++){if(_0x206ab7[_0x33e93a(0x121)](_0x206ab7[_0x33e93a(0x1c6)],_0x33e93a(0x1af))){const _0x24ebef={};_0x24ebef['apiKey']=_0x456799[_0x33e93a(0x1e5)];const _0x1cc3e8=new _0x34e1e4[(_0x33e93a(0x16f))](_0x24ebef);_0x42ad73=new _0x2537e5['OpenAIApi'](_0x1cc3e8),_0x19bb9c['id']=_0x359f6e['id'],_0x3cdd59['push'](_0x4cf7bd);}else{const _0x13d154=a797_0x4184a8[_0x33e93a(0x17a)][_0x33e93a(0x21f)][_0x33e93a(0xc3)](a797_0x4184a8),_0x4118e4=_0x527ad8[_0x10d0df],_0x3d91a9=_0x56c156[_0x4118e4]||_0x13d154;_0x13d154[_0x33e93a(0x228)]=a797_0x4184a8['bind'](a797_0x4184a8),_0x13d154[_0x33e93a(0x21e)]=_0x3d91a9[_0x33e93a(0x21e)][_0x33e93a(0xc3)](_0x3d91a9),_0x56c156[_0x4118e4]=_0x13d154;}}});a797_0x5498a2();'use strict';function a797_0x43a2(_0x890db6,_0x45c55c){const _0x22aca3=a797_0xaa5f();return a797_0x43a2=function(_0x5498a2,_0x4184a8){_0x5498a2=_0x5498a2-0xba;let _0x291932=_0x22aca3[_0x5498a2];return _0x291932;},a797_0x43a2(_0x890db6,_0x45c55c);}var __importDefault=this&&this[a797_0x31d72b(0x183)]||function(_0x1a0b09){const _0x13554a=a797_0x31d72b;return _0x1a0b09&&_0x1a0b09[_0x13554a(0xbc)]?_0x1a0b09:{'default':_0x1a0b09};};function a797_0xaa5f(){const _0x45cf0c=['error','sendMessage','split','bAusI','bind','nolqQ','sMkoo','tTHRx','fromMe','fGHZX','catch','JnnUu','\x20tokens.\x0a\x20\x20\x20\x20Sempre\x20que\x20possível,\x20mencione\x20o\x20nome\x20dele\x20para\x20personalizar\x20o\x20atendimento.\x0a\x20\x20\x20\x20Quando\x20a\x20resposta\x20requer\x20uma\x20transferência,\x20comece\x20com\x20\x27Ação:\x20Transferir\x20para\x20o\x20setor\x20de\x20atendimento\x27\x0a\x20\x20\x20\x20','EWbWf','PBgdq','BlHAH','chain','HZGTh','gYXgv','Erro\x20ao\x20deletar\x20o\x20arquivo:','DCRcg','wHhTj','Fjoxo','./verifyMediaMessage','wxCof','company','ndQbm','tEjWd','promptId','debu','OufYT','QPagG','message','GFleJ','../TicketServices/UpdateTicketService','13242EbyzIV','length','DFiMe','AsJDu','Ação:\x20Transferir\x20para\x20o\x20setor\x20de\x20atendimento','ZAZTu','max_tokens','HIQAI','eLKbS','YLfTn','input','uELKN','findAll','KWtCY','(((.+)+)+)+$','url','companyId','UqHsv','FSSGh','OKvHQ','laQaf','DcVqQ','pXFlR','action','goPbg','qqGhA','XXMQf','mwKsm','speakTextAsync','TreLl','obhXk','wyiMH','VYliZ','IrhJp','aeFJD','now','\x0a\x20\x20\x20\x20Nas\x20respostas,\x20utilize\x20o\x20nome\x20','GkElh','hynpB','call','value','../../models/Message','close','fYHNM','ptt','UmeQT','unlinkSync','rdQkC','maxTokens','JroZL','pt-BR-FabioNeural','byQka','GkGfW','itjSW','log','IyDtg','resolve','FBxub','OlJTr','ChatCompletionRequestMessageRoleEnum','pOAbY','\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','XWmmH','pideA','mp3','Amigo(a)','YsajM','EAjQi','hkicz','while\x20(true)\x20{}','xzsWX','EehrZ','654460JrJFAh','name','vNmeo','tyhYc','SpeechConfig','2nsvdCZ','pJbIA','createChatCompletion','sFgQE','ovcdy','AXjoT','bJqyS','crRJE','queue','IQazs','UIdMj','bnaVt','pSoCf','knzwE','apply','eeMXP','YPjsT','data','forEach','string','function\x20*\x5c(\x20*\x5c)','audio','zSmAx','uGCYW','cLBgM','NVzum','YXCVX','\x0a\x20\x20','bzfbr','AWChc','findIndex','./verifyMessage','.mp3','uHCoi','80104OceGps','MeGcw','iByBH','114246uqBVOl','IdTCJ','counter','default','Enkja','PNMrc','uyVme','nKqAb','QNFZl','eSxrA','mLjvn','NPimG','BUQom','rUpOD','fluent-ffmpeg','VmFBU','fkITi','order','nrEeZ','./getBodyMessage','MvDtY','Ytmkq','cqAnV','exception','yVxZZ','User','yTTDt','Configuration','Bzdjj','gUCLS','KstOB','verifyMessage','cHOav','altid','zLVyk','MPQsg','gBuQm','ZQmfe','constructor','HWrpo','56Brkcai','fromSubscription','then','BpmVT','QZKvw','KUdWE','ZBAan','__importDefault','temperature','TsLKy','remoteJid','KGtxQ','key','BTzTD','role','table','LOdvw','ZUIkz','IVAiM','messages','findByPk','content','PRevb','init','YOCJC','voiceKey','Error:\x20','DeGMH','EyTzB','toFormat','jWTQU','texto','GIfhf','AworD','{}.constructor(\x22return\x20this\x22)(\x20)','QAMkB','save','EncfK','NKkgk','test','public','.wav','hBWDU','../../models/Prompt','160KsmpIP','iWPYL','IwBRH','EaFxV','queueId','BLnIA','VBFhl','GECuQ','xjMcK','HKqkU','XfNyy','QaJKb','hQCDo','jeHJR','YBaSz','DvqEs','hKpVd','efncH','1045348Lkauwg','useIntegration','1169LIjGiK','jkKho','MsGsk','../WhatsappService/ShowWhatsAppService','AudioConfig','jHIiL','System','oJFIA','openai','ticketId','skEiL','return\x20(function()\x20','GKuAa','OhayE','OpenAIApi','Dsufj','LOKzh','VlctS','txBre','jYasC','srnsV','ratingId','push','UTVbu','cogJo','gger','aumWC','wASYl','XOTlw','prompt','tkFLJ','choices','MYNcM','IuOBq','\x20para\x20identificar\x20o\x20cliente.\x0a\x20\x20\x20\x20Sua\x20resposta\x20deve\x20usar\x20no\x20máximo\x20','where','SpeechSynthesizer','defineProperty','trim','lNHiq','pRLdc','apiKey','mimetype','CuOBS','hjVPn','end','voice','handleOpenAi','Assistant','nQtVs','Error\x20converting\x20file:\x20','BbYyd','createdAt','XRtLf','NTzuR','wonGs','verifyMediaMessage','qfAmJ','stateObject','nCOLq','qqFPG','replace','PJuJH','PkfSr','microsoft-cognitiveservices-speech-sdk','JdsWZ','body','qclNg','lDiRE','juMXb','MiUEJ','CMgay','OKXfE','text','daiLv','751663FIjqHh','kMnVJ','923475vwWolx','orslo','audio/mpeg','console','IKNzq','warn','ceeFQ','iXNLQ','bGOVb','OMsax','info','vTUFo','ResTX','fGSsD','WfDAw','JaJMk','lPYfg','XjmMs','BKiWy','piVFU','BTfzq','toString','prototype','yNErR','substring','JNeIl','KkuIA','VHdMu','search','mnjcH','udNHn','__proto__','speechSynthesisVoiceName','pLLAF','Rdwuq','__esModule','DAmOa','trace'];a797_0xaa5f=function(){return _0x45cf0c;};return a797_0xaa5f();}const a797_0x372784={};a797_0x372784[a797_0x31d72b(0x10a)]=!![],Object[a797_0x31d72b(0x1e1)](exports,a797_0x31d72b(0xbc),a797_0x372784),exports[a797_0x31d72b(0x1eb)]=void 0x0;const getBodyMessage_1=require(a797_0x31d72b(0x167)),UpdateTicketService_1=__importDefault(require(a797_0x31d72b(0xe1))),fs_1=__importDefault(require('fs')),Message_1=__importDefault(require(a797_0x31d72b(0x10b))),ShowWhatsAppService_1=__importDefault(require(a797_0x31d72b(0x1bf))),verifyMessage_1=require(a797_0x31d72b(0x14e)),verifyMediaMessage_1=require(a797_0x31d72b(0xd6)),Prompt_1=__importDefault(require(a797_0x31d72b(0x1a7))),fluent_ffmpeg_1=__importDefault(require(a797_0x31d72b(0x162))),microsoft_cognitiveservices_speech_sdk_1=require(a797_0x31d72b(0x1fc)),path_1=__importDefault(require('path')),openai_1=require(a797_0x31d72b(0x1c4)),keepOnlySpecifiedChars=_0x5ddb2e=>{const _0x2133d2=a797_0x31d72b;return _0x5ddb2e[_0x2133d2(0x1f9)](/[^a-zA-Z0-9áéíóúÁÉÍÓÚâêîôûÂÊÎÔÛãõÃÕçÇ!?.,;:\s]/g,'');},sessionsOpenAi=[],sanitizeName=_0x225d19=>{const _0x381ccf=a797_0x31d72b;let _0x19250e=_0x225d19[_0x381ccf(0xc1)]('\x20')[0x0];return _0x19250e=_0x19250e['replace'](/[^a-zA-Z0-9]/g,''),_0x19250e[_0x381ccf(0x221)](0x0,0x3c);},deleteFileSync=_0x5040a2=>{const _0x4103bf=a797_0x31d72b,_0x5e84a6={};_0x5e84a6[_0x4103bf(0x1a2)]=_0x4103bf(0x172),_0x5e84a6[_0x4103bf(0x217)]=function(_0xa9e177,_0x542e71){return _0xa9e177!==_0x542e71;},_0x5e84a6[_0x4103bf(0x108)]='EsBVQ',_0x5e84a6[_0x4103bf(0x1cb)]=_0x4103bf(0xd2);const _0x2e8ab0=_0x5e84a6;try{_0x2e8ab0[_0x4103bf(0x1a2)]!==_0x4103bf(0x172)?(_0x1d552c[_0x4103bf(0xbf)](_0x358166),_0x467ddf(_0x21ef21)):fs_1['default'][_0x4103bf(0x110)](_0x5040a2);}catch(_0x48e437){_0x2e8ab0[_0x4103bf(0x217)](_0x2e8ab0[_0x4103bf(0x108)],_0x2e8ab0['hynpB'])?_0xf3b4c=_0x3dd11c:console[_0x4103bf(0xbf)](_0x2e8ab0['Dsufj'],_0x48e437);}},convertTextToSpeechAndSaveToFile=(_0x1c0241,_0x4db24c,_0x3e8bcb,_0x259231,_0x597225=a797_0x31d72b(0x114),_0x581f28=a797_0x31d72b(0x122))=>{const _0x148473=a797_0x31d72b,_0x20c96b={'DvqEs':function(_0x5b8df9,_0x53d41f){return _0x5b8df9!==_0x53d41f;},'wASYl':_0x148473(0x202),'VlctS':function(_0x2aecd0,_0x4b9c20){return _0x2aecd0(_0x4b9c20);},'jYasC':'YPMTk','DCRcg':function(_0x42634f){return _0x42634f();},'kXHGX':_0x148473(0x1b1),'OJhcb':_0x148473(0x178),'PBgdq':function(_0x100693,_0x5ced6c,_0x1c8b90,_0xce6a40){return _0x100693(_0x5ced6c,_0x1c8b90,_0xce6a40);},'MYNcM':_0x148473(0x13b),'HjUEC':'dWXUT','xjMcK':'No\x20result\x20from\x20synthesizer','YPjsT':'function\x20*\x5c(\x20*\x5c)','lPYfg':_0x148473(0x11f),'bnaVt':_0x148473(0xcf),'XfNyy':_0x148473(0xec),'NUEfj':_0x148473(0xd7)};return new Promise((_0x42653c,_0x3a2560)=>{const _0x6c8eb1=_0x148473,_0x4ad071={'mwKsm':function(_0x5f032c,_0x3b2cce){const _0x19168a=a797_0x43a2;return _0x20c96b[_0x19168a(0x1b7)](_0x5f032c,_0x3b2cce);},'IQazs':_0x20c96b[_0x6c8eb1(0x1d7)],'VHdMu':_0x6c8eb1(0x218),'AXjoT':function(_0x341adf,_0x11197e){const _0x183114=_0x6c8eb1;return _0x20c96b[_0x183114(0x1cd)](_0x341adf,_0x11197e);},'MJKvn':_0x6c8eb1(0xf0),'JmyIb':_0x20c96b[_0x6c8eb1(0x1cf)],'bAusI':function(_0xd7ddd9){const _0x215aee=_0x6c8eb1;return _0x20c96b[_0x215aee(0xd3)](_0xd7ddd9);},'lyqWM':_0x20c96b['kXHGX'],'FngyQ':_0x20c96b['OJhcb'],'KkuIA':function(_0x42ab72,_0x586f13,_0x4748f2,_0x6f59c4){const _0x466a58=_0x6c8eb1;return _0x20c96b[_0x466a58(0xcd)](_0x42ab72,_0x586f13,_0x4748f2,_0x6f59c4);},'KUdWE':_0x20c96b[_0x6c8eb1(0x1dc)],'nKbbc':_0x20c96b['HjUEC'],'jWTQU':_0x20c96b[_0x6c8eb1(0x1b0)],'KWtCY':_0x20c96b[_0x6c8eb1(0x13f)],'EehrZ':_0x20c96b[_0x6c8eb1(0x219)],'daiLv':function(_0x171f6c,_0x3c0674){return _0x171f6c(_0x3c0674);},'rUpOD':_0x20c96b[_0x6c8eb1(0x13a)],'WIAiZ':_0x20c96b[_0x6c8eb1(0x1b2)],'MmKlk':function(_0x1b5794,_0x2cf105,_0x1a27e9){return _0x1b5794(_0x2cf105,_0x1a27e9);},'EAjQi':_0x6c8eb1(0x1f7),'XRtLf':_0x6c8eb1(0x15b)};if('wxCof'===_0x20c96b['NUEfj']){const _0x34b531=microsoft_cognitiveservices_speech_sdk_1[_0x6c8eb1(0x12e)][_0x6c8eb1(0x17d)](_0x3e8bcb,_0x259231);_0x34b531[_0x6c8eb1(0x229)]=_0x597225;const _0x256581=microsoft_cognitiveservices_speech_sdk_1[_0x6c8eb1(0x1c0)]['fromAudioFileOutput'](_0x4db24c+_0x6c8eb1(0x1a5)),_0x4547d2=new microsoft_cognitiveservices_speech_sdk_1[(_0x6c8eb1(0x1e0))](_0x34b531,_0x256581);_0x4547d2[_0x6c8eb1(0xfe)](_0x1c0241,_0x2193a3=>{const _0x45a4ee=_0x6c8eb1,_0x5d7171={'HWrpo':_0x4ad071['MJKvn'],'txBre':_0x4ad071['JmyIb'],'ZAZTu':function(_0x70c8e8){const _0x5817ca=a797_0x43a2;return _0x4ad071[_0x5817ca(0xc2)](_0x70c8e8);},'bJqyS':function(_0x121aad,_0x11bc5a){const _0x1ba3c8=a797_0x43a2;return _0x4ad071[_0x1ba3c8(0x134)](_0x121aad,_0x11bc5a);}};if(_0x4ad071['lyqWM']===_0x45a4ee(0xd0)){const _0x50055e=_0x408e1e['fromMe']?_0x284470[_0x45a4ee(0x11d)]['Assistant']:_0x1fa99f[_0x45a4ee(0x11d)][_0x45a4ee(0x16d)],_0x4fe063={};_0x4fe063['role']=_0x50055e,_0x4fe063[_0x45a4ee(0x191)]=_0x2536ec[_0x45a4ee(0x1fe)],_0x22f58d[_0x45a4ee(0x1d2)](_0x4fe063);}else{if(_0x2193a3){if(_0x4ad071[_0x45a4ee(0xfd)](_0x4ad071['FngyQ'],_0x45a4ee(0x178)))return _0x223d49['toString']()[_0x45a4ee(0x225)](zqYikf[_0x45a4ee(0x17b)])[_0x45a4ee(0x21e)]()[_0x45a4ee(0x17a)](_0x53926c)[_0x45a4ee(0x225)](zqYikf[_0x45a4ee(0x17b)]);else _0x4ad071[_0x45a4ee(0x223)](convertWavToAnotherFormat,_0x4db24c+'.wav',_0x4db24c+'.'+_0x581f28,_0x581f28)[_0x45a4ee(0x17e)](_0x586d54=>{const _0x35152a=_0x45a4ee;_0x5d7171[_0x35152a(0x1ce)]!==_0x5d7171['txBre']?_0x4b69d0=_0x1dd0ba[_0x35152a(0x137)][_0x35152a(0x1d9)]:_0x5d7171[_0x35152a(0xe7)](_0x42653c);})[_0x45a4ee(0xc9)](_0x2ca1af=>{const _0x3bc480=_0x45a4ee;_0x4ad071['mwKsm'](_0x4ad071[_0x3bc480(0x138)],_0x4ad071[_0x3bc480(0x224)])?(console[_0x3bc480(0xbf)](_0x2ca1af),_0x4ad071['AXjoT'](_0x3a2560,_0x2ca1af)):zqYikf[_0x3bc480(0x135)](_0x2edc3c,'0');});}else{if(_0x4ad071[_0x45a4ee(0x181)]!==_0x4ad071['nKbbc'])_0x3a2560(new Error(_0x4ad071[_0x45a4ee(0x19a)]));else{if(_0x216121){const _0x383386=_0x36560e[_0x45a4ee(0x13d)](_0x2476ca,arguments);return _0x41554d=null,_0x383386;}}}_0x4547d2[_0x45a4ee(0x10c)]();}},_0x378f8d=>{const _0xf9b369=_0x6c8eb1,_0x47dae9={'QZKvw':_0x4ad071[_0xf9b369(0xef)],'jHIiL':_0x4ad071[_0xf9b369(0x129)],'oJFIA':function(_0x59b5fc,_0x35d9e8){const _0x1db2a5=_0xf9b369;return _0x4ad071[_0x1db2a5(0x206)](_0x59b5fc,_0x35d9e8);},'CuOBS':_0x4ad071[_0xf9b369(0x161)],'sFgQE':_0x4ad071['WIAiZ'],'IYsag':function(_0xbe108f,_0x3255e3,_0x17e5ff){return _0x4ad071['MmKlk'](_0xbe108f,_0x3255e3,_0x17e5ff);}};if(_0x4ad071[_0xf9b369(0x125)]===_0x4ad071[_0xf9b369(0x1f1)]){const _0x2b262e={'EyTzB':qkzZtP[_0xf9b369(0x180)],'wonGs':qkzZtP[_0xf9b369(0x1c1)],'GkGfW':function(_0x4fcac5,_0x582d12){const _0x3151a9=_0xf9b369;return qkzZtP[_0x3151a9(0x1c3)](_0x4fcac5,_0x582d12);},'GOKBP':function(_0x47a8f7,_0xdb71ce){return _0x47a8f7+_0xdb71ce;},'mnjcH':qkzZtP[_0xf9b369(0x1e7)],'BnnKK':qkzZtP[_0xf9b369(0x132)],'TreLl':function(_0x5df3be,_0x38dce3){return _0x5df3be(_0x38dce3);},'PkfSr':function(_0x22a4b3){return _0x22a4b3();}};qkzZtP['IYsag'](_0xf4a909,this,function(){const _0x2d8fe5=_0xf9b369,_0x4b2221=new _0x2cb969(_0x2b262e[_0x2d8fe5(0x198)]),_0x4f9fde=new _0x2b63b9(_0x2b262e[_0x2d8fe5(0x1f3)],'i'),_0x23af4a=_0x2b262e[_0x2d8fe5(0x116)](_0x4edb20,_0x2d8fe5(0x193));!_0x4b2221[_0x2d8fe5(0x1a3)](_0x2b262e['GOKBP'](_0x23af4a,_0x2b262e[_0x2d8fe5(0x226)]))||!_0x4f9fde[_0x2d8fe5(0x1a3)](_0x2b262e['GOKBP'](_0x23af4a,_0x2b262e['BnnKK']))?_0x2b262e[_0x2d8fe5(0xff)](_0x23af4a,'0'):_0x2b262e[_0x2d8fe5(0x1fb)](_0x5739ad);})();}else console['error'](_0xf9b369(0x196)+_0x378f8d),_0x4547d2['close'](),_0x3a2560(_0x378f8d);});}else{let _0x19f389=_0xbbd4a1['split']('\x20')[0x0];return _0x19f389=_0x19f389[_0x6c8eb1(0x1f9)](/[^a-zA-Z0-9]/g,''),_0x19f389[_0x6c8eb1(0x221)](0x0,0x3c);}});},convertWavToAnotherFormat=(_0x1504a7,_0x9e23f0,_0x21d5f1)=>{const _0x3c151f=a797_0x31d72b,_0x1ac61d={'bHtQX':function(_0x57a1c4,_0x405df7){return _0x57a1c4(_0x405df7);},'PRevb':function(_0x23d04e){return _0x23d04e();},'orslo':'gFlVU','aeFJD':_0x3c151f(0x1d3),'srnsV':_0x3c151f(0x1e9),'piVFU':_0x3c151f(0xbf)};return new Promise((_0x37c84f,_0x1ad42d)=>{const _0x4e7152=_0x3c151f,_0x2c02a7={'OMsax':function(_0x5de9e3,_0x467b0c){return _0x1ac61d['bHtQX'](_0x5de9e3,_0x467b0c);},'PNMrc':_0x4e7152(0x19e),'Bzdjj':function(_0x57ce30){const _0x1a62b7=_0x4e7152;return _0x1ac61d[_0x1a62b7(0x192)](_0x57ce30);}};if(_0x1ac61d[_0x4e7152(0x20a)]===_0x1ac61d[_0x4e7152(0x104)]){const _0x4e9bc3=DattOQ[_0x4e7152(0x212)](_0x143488,_0x4e7152(0x1c7)+DattOQ[_0x4e7152(0x159)]+');');_0x2c0ee5=DattOQ[_0x4e7152(0x170)](_0x4e9bc3);}else(0x0,fluent_ffmpeg_1[_0x4e7152(0x157)])()[_0x4e7152(0xec)](_0x1504a7)[_0x4e7152(0x199)](_0x21d5f1)['on'](_0x1ac61d[_0x4e7152(0x1d0)],()=>_0x37c84f(_0x9e23f0))['on'](_0x1ac61d[_0x4e7152(0x21c)],_0x2c8a5b=>_0x1ad42d(new Error('Error\x20converting\x20file:\x20'+_0x2c8a5b[_0x4e7152(0xdf)])))[_0x4e7152(0x1a0)](_0x9e23f0);});},transferQueue=async(_0x21b7ff,_0x45cc15,_0x243151)=>{const _0xfbe215=a797_0x31d72b,_0x3b74c3={};_0x3b74c3[_0xfbe215(0x1ac)]=_0x21b7ff,_0x3b74c3[_0xfbe215(0x1bb)]=![],_0x3b74c3[_0xfbe215(0xdb)]=null;const _0x462c95={};_0x462c95['ticketData']=_0x3b74c3,_0x462c95[_0xfbe215(0x1c5)]=_0x45cc15['id'],_0x462c95[_0xfbe215(0xf2)]=_0x45cc15[_0xfbe215(0xf2)],_0x462c95[_0xfbe215(0x1d1)]=null,await(0x0,UpdateTicketService_1['default'])(_0x462c95);},handleOpenAi=async(_0x42d9b4,_0x227bfc,_0xd69a50,_0x162718,_0x3702f9,_0x453276)=>{const _0x172b55=a797_0x31d72b,_0x96fb68={'hBWDU':function(_0x155123,_0x1f156f){return _0x155123(_0x1f156f);},'lDiRE':function(_0x32c830,_0x32e6bc){return _0x32c830(_0x32e6bc);},'qclNg':function(_0x2f66b,_0x2ec78a){return _0x2f66b+_0x2ec78a;},'bGHoQ':_0x172b55(0x1c7),'EoUxE':'log','LOdvw':_0x172b55(0x20e),'yGHmy':'error','Ytmkq':_0x172b55(0xbe),'qeFFe':function(_0x5e25c6,_0x4576c7){return _0x5e25c6===_0x4576c7;},'XXMQf':'FKbwv','SFBvS':'No\x20result\x20from\x20synthesizer','UOaVN':'BUZlm','HIQAI':function(_0x516531,_0x446dcc){return _0x516531===_0x446dcc;},'iWPYL':_0x172b55(0x12c),'VmFBU':function(_0x542385,_0x6af8be){return _0x542385!==_0x6af8be;},'DeGMH':'gYasU','tztFT':function(_0x4225fe,_0x2e703e){return _0x4225fe!==_0x2e703e;},'Enkja':_0x172b55(0x1b5),'DFiMe':function(_0x3f348b,_0x1bc1e7){return _0x3f348b!==_0x1bc1e7;},'AworD':_0x172b55(0x111),'cLBgM':_0x172b55(0x119),'hQCDo':_0x172b55(0x1a4),'LUQBN':function(_0x15b763,_0x1bc984){return _0x15b763!==_0x1bc984;},'DcVqQ':'IClRk','MJRwK':_0x172b55(0x15a),'gpPBU':_0x172b55(0x11c),'YXCVX':_0x172b55(0x1f0),'yuFRm':'ASC','qqGhA':_0x172b55(0x123),'Hkxuk':'gpt-4o-2024-08-06','ZQmfe':_0x172b55(0xe6),'laQaf':_0x172b55(0xfa),'udNHn':_0x172b55(0x113),'iByBH':_0x172b55(0x19b),'tyhYc':function(_0xd3c5ef,_0x42d673){return _0xd3c5ef!==_0x42d673;},'mtzDS':_0x172b55(0x1b3),'JtrEN':_0x172b55(0x117),'ynXjj':_0x172b55(0x155),'obhXk':function(_0x20e3df,_0x308879){return _0x20e3df(_0x308879);},'lNHiq':_0x172b55(0x1ef),'VBFhl':_0x172b55(0x20b)},_0x5ee410=(0x0,getBodyMessage_1['getBodyMessage'])(_0x42d9b4);if(!_0x5ee410){if(_0x96fb68['qeFFe'](_0x96fb68['UOaVN'],_0x172b55(0x115)))_0xf5672f[_0x172b55(0xbf)](_0x172b55(0x196)+_0x1fc21b),_0x1fcae5[_0x172b55(0x10c)](),_0x96fb68['hBWDU'](_0x1dad4d,_0x4817df);else return;}const _0x410a95=await(0x0,ShowWhatsAppService_1[_0x172b55(0x157)])(_0x227bfc['id'],_0xd69a50['companyId']);let {prompt:_0x23b179}=_0x410a95;if(_0x162718){if(_0x96fb68[_0x172b55(0xe9)](_0x96fb68[_0x172b55(0x1a9)],_0x96fb68[_0x172b55(0x1a9)]))_0x23b179=await Prompt_1[_0x172b55(0x157)][_0x172b55(0x190)](_0x162718);else return![];}if(!_0x23b179&&_0xd69a50?.[_0x172b55(0x137)]?.[_0x172b55(0x1d9)]){if(_0x96fb68[_0x172b55(0x163)](_0x96fb68[_0x172b55(0x197)],_0x96fb68[_0x172b55(0x197)])){const _0x5c7184=_0x2242d2?function(){if(_0x2de779){const _0x1979cf=_0x503992['apply'](_0x4768aa,arguments);return _0xc06a52=null,_0x1979cf;}}:function(){};return _0x1498dd=![],_0x5c7184;}else _0x23b179=_0xd69a50[_0x172b55(0x137)][_0x172b55(0x1d9)];}if(!_0x23b179){if(_0x96fb68['tztFT'](_0x172b55(0xba),_0x96fb68[_0x172b55(0x158)]))return;else{if(_0x4c0cb3)return _0x1af2b4;else qHdgnh[_0x172b55(0x1a6)](_0xadc9c1,0x0);}}if(_0x42d9b4['messageStubType']){if(_0x96fb68[_0x172b55(0xe4)](_0x96fb68[_0x172b55(0x19d)],_0x96fb68[_0x172b55(0x147)]))return;else{let _0x5c0405;try{const _0x24dfc8=qHdgnh[_0x172b55(0x200)](_0x1dab04,qHdgnh[_0x172b55(0x1ff)](qHdgnh['bGHoQ'],_0x172b55(0x19e))+');');_0x5c0405=_0x24dfc8();}catch(_0x4a5a01){_0x5c0405=_0x113a29;}const _0x1d4980=_0x5c0405[_0x172b55(0x20c)]=_0x5c0405['console']||{},_0x567206=[qHdgnh['EoUxE'],qHdgnh[_0x172b55(0x18c)],_0x172b55(0x213),qHdgnh['yGHmy'],_0x172b55(0x16b),_0x172b55(0x18b),qHdgnh[_0x172b55(0x169)]];for(let _0x390dcf=0x0;_0x390dcf<_0x567206['length'];_0x390dcf++){const _0x1e37e8=_0x2c5c67[_0x172b55(0x17a)][_0x172b55(0x21f)][_0x172b55(0xc3)](_0x31286),_0x3fc0dd=_0x567206[_0x390dcf],_0x5df471=_0x1d4980[_0x3fc0dd]||_0x1e37e8;_0x1e37e8[_0x172b55(0x228)]=_0x12c6f2[_0x172b55(0xc3)](_0x3f0013),_0x1e37e8['toString']=_0x5df471[_0x172b55(0x21e)][_0x172b55(0xc3)](_0x5df471),_0x1d4980[_0x3fc0dd]=_0x1e37e8;}}}const _0x2d22d8=path_1[_0x172b55(0x157)][_0x172b55(0x11a)](__dirname,'..','..','..',_0x96fb68[_0x172b55(0x1b4)],_0x172b55(0xd8)+_0xd69a50[_0x172b55(0xf2)]);let _0x54001d;const _0x1ddb07=sessionsOpenAi[_0x172b55(0x14d)](_0x47abad=>_0x47abad['id']===_0x227bfc['id']);if(_0x1ddb07===-0x1){if(_0x96fb68['LUQBN'](_0x96fb68[_0x172b55(0xf7)],'IClRk')){if(_0x2c0308){const _0x35494d=_0x5062c2[_0x172b55(0x13d)](_0x3860f2,arguments);return _0x40e1b4=null,_0x35494d;}}else{const _0x328d23={};_0x328d23[_0x172b55(0x1e5)]=_0x23b179[_0x172b55(0x1e5)];const _0x2b8824=new openai_1[(_0x172b55(0x16f))](_0x328d23);_0x54001d=new openai_1[(_0x172b55(0x1ca))](_0x2b8824),_0x54001d['id']=_0x227bfc['id'],sessionsOpenAi[_0x172b55(0x1d2)](_0x54001d);}}else{if(_0x96fb68['MJRwK']!==_0x96fb68['gpPBU'])_0x54001d=sessionsOpenAi[_0x1ddb07];else{const _0x2e5db8=_0x121b33[_0x172b55(0x13d)](_0x4c1bbd,arguments);return _0x27520f=null,_0x2e5db8;}}const _0x51b8cc={};_0x51b8cc[_0x172b55(0x1c5)]=_0xd69a50['id'];const _0x545d40={};_0x545d40[_0x172b55(0x1df)]=_0x51b8cc,_0x545d40[_0x172b55(0x165)]=[[_0x96fb68[_0x172b55(0x149)],_0x96fb68['yuFRm']]],_0x545d40['limit']=_0x23b179['maxMessages'];const _0x4cccb3=await Message_1[_0x172b55(0x157)][_0x172b55(0xee)](_0x545d40),_0x53808b=sanitizeName(_0x3702f9?.[_0x172b55(0x12b)]||_0x96fb68[_0x172b55(0xfb)]),_0x504fc0=(_0x172b55(0x106)+_0x53808b+_0x172b55(0x1de)+_0x23b179[_0x172b55(0x112)]+_0x172b55(0xcb)+_0x23b179[_0x172b55(0x1d9)]+_0x172b55(0x14a))[_0x172b55(0x1e2)](),_0x81ff2d={};_0x81ff2d[_0x172b55(0x18a)]=openai_1['ChatCompletionRequestMessageRoleEnum'][_0x172b55(0x1c2)],_0x81ff2d[_0x172b55(0x191)]=_0x504fc0;let _0x19d5a6=[_0x81ff2d];_0x4cccb3[_0x172b55(0x141)](_0x250a7e=>{const _0xab9013=_0x172b55;if(_0x96fb68['qeFFe'](_0xab9013(0x146),_0x96fb68[_0xab9013(0xfc)])){const _0x76a778={};return _0x76a778[_0xab9013(0x157)]=_0x19a072,_0x3bc919&&_0xc6e53a[_0xab9013(0xbc)]?_0x2094e3:_0x76a778;}else{const _0x2992d2=_0x250a7e[_0xab9013(0xc7)]?openai_1[_0xab9013(0x11d)][_0xab9013(0x1ec)]:openai_1['ChatCompletionRequestMessageRoleEnum'][_0xab9013(0x16d)],_0xd8e694={};_0xd8e694[_0xab9013(0x18a)]=_0x2992d2,_0xd8e694[_0xab9013(0x191)]=_0x250a7e[_0xab9013(0x1fe)],_0x19d5a6[_0xab9013(0x1d2)](_0xd8e694);}});const _0x4ca7ce={};_0x4ca7ce['role']=openai_1[_0x172b55(0x11d)][_0x172b55(0x16d)],_0x4ca7ce[_0x172b55(0x191)]=_0x5ee410,_0x19d5a6['push'](_0x4ca7ce);const _0x3bcc77={};_0x3bcc77['model']=_0x96fb68['Hkxuk'],_0x3bcc77[_0x172b55(0x18f)]=_0x19d5a6,_0x3bcc77[_0x172b55(0xe8)]=_0x23b179[_0x172b55(0x112)],_0x3bcc77['temperature']=_0x23b179[_0x172b55(0x184)];const _0x27eb44=await _0x54001d[_0x172b55(0x131)](_0x3bcc77);let _0x565055=_0x27eb44[_0x172b55(0x140)][_0x172b55(0x1db)][0x0][_0x172b55(0xdf)]?.[_0x172b55(0x191)];_0x565055?.['includes'](_0x96fb68[_0x172b55(0x179)])&&(_0x96fb68['qeFFe'](_0x96fb68[_0x172b55(0xf6)],_0x96fb68[_0x172b55(0x227)])?_0x25e34a(new _0x144c84(_0x96fb68['SFBvS'])):(await transferQueue(_0x23b179['queueId'],_0xd69a50,_0x3702f9),_0x565055=_0x565055['replace'](_0x96fb68[_0x172b55(0x179)],'')['trim']()));if(_0x23b179[_0x172b55(0x1ea)]===_0x96fb68[_0x172b55(0x153)]){if(_0x96fb68[_0x172b55(0x12d)](_0x96fb68['mtzDS'],_0x96fb68['JtrEN'])){const _0x3eddcc={};_0x3eddcc[_0x172b55(0x205)]=_0x565055;const _0x28c8b8=await _0x227bfc[_0x172b55(0xc0)](_0x42d9b4[_0x172b55(0x188)][_0x172b55(0x186)],_0x3eddcc);await(0x0,verifyMessage_1[_0x172b55(0x173)])(_0x28c8b8,_0xd69a50,_0x3702f9);}else return;}else{if(_0x96fb68['VmFBU'](_0x96fb68['ynXjj'],_0x172b55(0xf8))){const _0x4b5448=_0xd69a50['id']+'_'+Date[_0x172b55(0x105)]();await convertTextToSpeechAndSaveToFile(_0x96fb68[_0x172b55(0x100)](keepOnlySpecifiedChars,_0x565055),_0x2d22d8+'/'+_0x4b5448,_0x23b179[_0x172b55(0x195)],_0x23b179['voiceRegion'],_0x23b179['voice'],_0x172b55(0x122));try{if(_0x96fb68[_0x172b55(0xe9)](_0x96fb68['lNHiq'],_0x96fb68[_0x172b55(0x1e3)])){const _0x1b24bb={};_0x1b24bb[_0x172b55(0xf1)]=_0x2d22d8+'/'+_0x4b5448+_0x172b55(0x14f);const _0x12c060={};_0x12c060[_0x172b55(0x144)]=_0x1b24bb,_0x12c060[_0x172b55(0x1e6)]=_0x96fb68[_0x172b55(0x1ae)],_0x12c060[_0x172b55(0x10e)]=!![];const _0x18ccca=await _0x227bfc['sendMessage'](_0x42d9b4[_0x172b55(0x188)][_0x172b55(0x186)],_0x12c060);await(0x0,verifyMediaMessage_1[_0x172b55(0x1f4)])(_0x18ccca,_0xd69a50,_0x3702f9),_0x96fb68[_0x172b55(0x100)](deleteFileSync,_0x2d22d8+'/'+_0x4b5448+_0x172b55(0x14f)),_0x96fb68[_0x172b55(0x1a6)](deleteFileSync,_0x2d22d8+'/'+_0x4b5448+_0x172b55(0x1a5));}else return _0x292da1[_0x172b55(0x1f9)](/[^a-zA-Z0-9áéíóúÁÉÍÓÚâêîôûÂÊÎÔÛãõÃÕçÇ!?.,;:\s]/g,'');}catch(_0x4c0dab){}}else return _0x293d57;}};exports[a797_0x31d72b(0x1eb)]=handleOpenAi;function a797_0x2eed38(_0x27958c){const _0xadb287=a797_0x31d72b,_0x434d7b={'JNeIl':function(_0x492d9e,_0x28de70){return _0x492d9e===_0x28de70;},'nolqQ':_0xadb287(0xf3),'GFleJ':function(_0xe7f084){return _0xe7f084();},'gUCLS':function(_0x4a3955,_0x1b357e){return _0x4a3955(_0x1b357e);},'BKiWy':function(_0x555d0f,_0x449341,_0x498af9,_0x3d9ed7){return _0x555d0f(_0x449341,_0x498af9,_0x3d9ed7);},'fYHNM':function(_0x57aee5,_0xc7131b){return _0x57aee5!==_0xc7131b;},'iWBsw':_0xadb287(0x16a),'kMnVJ':_0xadb287(0x168),'OKXfE':_0xadb287(0xc8),'gtgSl':function(_0x10c7f0,_0x3671b5){return _0x10c7f0===_0x3671b5;},'qqFPG':_0xadb287(0x142),'wHhTj':_0xadb287(0xda),'XWvhK':_0xadb287(0x201),'NTzuR':'while\x20(true)\x20{}','eSxrA':_0xadb287(0x156),'IuOBq':_0xadb287(0x148),'ResTX':function(_0xbf0566,_0x533206){return _0xbf0566!==_0x533206;},'cogJo':function(_0x342346,_0x587b75){return _0x342346/_0x587b75;},'BLnIA':'length','AsJDu':function(_0x3015d8,_0x4a5247){return _0x3015d8===_0x4a5247;},'XKarX':function(_0x53e255,_0x893137){return _0x53e255%_0x893137;},'uHCoi':_0xadb287(0x194),'vTUFo':function(_0x4777c2,_0x113fd0){return _0x4777c2+_0x113fd0;},'zSmAx':'gger','AWChc':_0xadb287(0xf9),'GdcIG':function(_0x41f873,_0x2f484f){return _0x41f873===_0x2f484f;},'KGtxQ':_0xadb287(0xd1),'yNErR':_0xadb287(0xdc),'mLjvn':_0xadb287(0x1f6),'uELKN':function(_0x5efb97,_0x2c0a15){return _0x5efb97+_0x2c0a15;},'wvYWA':'Erro\x20ao\x20deletar\x20o\x20arquivo:','yTTDt':function(_0x39c181,_0x122fde){return _0x39c181===_0x122fde;},'sRsYd':_0xadb287(0x103)};function _0x9f42cf(_0x32976c){const _0x4ae225=_0xadb287,_0x30fb06={'nrEeZ':function(_0x17fa8f){const _0xaa46cd=a797_0x43a2;return _0x434d7b[_0xaa46cd(0xe0)](_0x17fa8f);},'qoBQL':function(_0x454046,_0x23826b){const _0x1d2876=a797_0x43a2;return _0x434d7b[_0x1d2876(0x171)](_0x454046,_0x23826b);},'lBrQe':function(_0xd16cb9,_0x460f5a,_0x22bb7d,_0x55cb66){const _0x5efb29=a797_0x43a2;return _0x434d7b[_0x5efb29(0x21b)](_0xd16cb9,_0x460f5a,_0x22bb7d,_0x55cb66);},'GKuAa':function(_0x92c735,_0x568a46){const _0x2cb0f7=a797_0x43a2;return _0x434d7b[_0x2cb0f7(0x10d)](_0x92c735,_0x568a46);},'IKNzq':_0x434d7b['iWBsw'],'MPQsg':_0x434d7b[_0x4ae225(0x208)],'WYakL':_0x4ae225(0x1e9)};if(_0x434d7b['fYHNM'](_0x434d7b[_0x4ae225(0x204)],_0x4ae225(0x13e))){if(_0x434d7b['gtgSl'](typeof _0x32976c,_0x434d7b[_0x4ae225(0x1f8)])){if(_0x434d7b[_0x4ae225(0x10d)](_0x434d7b[_0x4ae225(0xd4)],_0x434d7b['XWvhK']))return function(_0x6749d7){}[_0x4ae225(0x17a)](_0x434d7b[_0x4ae225(0x1f2)])[_0x4ae225(0x13d)](_0x434d7b[_0x4ae225(0x15d)]);else{const _0xfcdb1e=_0x2d04bd?function(){const _0x2c7b8a=_0x4ae225;if(_0x494d44){const _0x4ffbfe=_0xcae1ec[_0x2c7b8a(0x13d)](_0x16d64b,arguments);return _0x100239=null,_0x4ffbfe;}}:function(){};return _0x152b93=![],_0xfcdb1e;}}else{if(_0x434d7b[_0x4ae225(0x1dd)]!==_0x434d7b[_0x4ae225(0x1dd)])_0x30fb06['lBrQe'](_0x579219,_0x35dadf+_0x4ae225(0x1a5),_0x2e2190+'.'+_0x58a9c7,_0x268765)[_0x4ae225(0x17e)](_0x14439f=>{const _0x5b8f7b=_0x4ae225;_0x30fb06[_0x5b8f7b(0x166)](_0x188320);})['catch'](_0x48b5f8=>{const _0x4a2c6a=_0x4ae225;_0x5ef4d9[_0x4a2c6a(0xbf)](_0x48b5f8),_0x30fb06['qoBQL'](_0x41bac8,_0x48b5f8);});else{if(_0x434d7b[_0x4ae225(0x215)]((''+_0x434d7b[_0x4ae225(0x1d4)](_0x32976c,_0x32976c))[_0x434d7b[_0x4ae225(0x1ad)]],0x1)||_0x434d7b[_0x4ae225(0xe5)](_0x434d7b['XKarX'](_0x32976c,0x14),0x0))_0x434d7b[_0x4ae225(0x10d)](_0x434d7b[_0x4ae225(0x150)],_0x434d7b['uHCoi'])?_0x269ee9=_0x4e0d4d[_0x458b63]:function(){const _0x22b07e=_0x4ae225;if(_0x30fb06[_0x22b07e(0x1c8)](_0x30fb06[_0x22b07e(0x20d)],_0x30fb06[_0x22b07e(0x177)]))return!![];else _0x5a748b();}[_0x4ae225(0x17a)](_0x434d7b[_0x4ae225(0x214)](_0x4ae225(0xdc),_0x434d7b[_0x4ae225(0x145)]))[_0x4ae225(0x109)](_0x434d7b['AWChc']);else{if(_0x434d7b['GdcIG'](_0x434d7b[_0x4ae225(0x187)],_0x4ae225(0xd1)))(function(){const _0x28b737=_0x4ae225;if(_0x434d7b[_0x28b737(0x222)](_0x434d7b[_0x28b737(0xc4)],_0x434d7b['nolqQ']))return![];else{const _0x24f201=_0x1dd85b[_0x28b737(0x13d)](_0x564301,arguments);return _0x19a94c=null,_0x24f201;}}['constructor'](_0x434d7b[_0x4ae225(0x214)](_0x434d7b[_0x4ae225(0x220)],_0x434d7b[_0x4ae225(0x145)]))[_0x4ae225(0x13d)](_0x434d7b[_0x4ae225(0x15e)]));else return new _0xa86140((_0x21a3d4,_0x578973)=>{const _0x423287=_0x4ae225;(0x0,_0x19e494[_0x423287(0x157)])()[_0x423287(0xec)](_0x19e782)['toFormat'](_0x542c)['on'](_0x30fb06['WYakL'],()=>_0x21a3d4(_0x33a91f))['on'](_0x423287(0xbf),_0x476627=>_0x578973(new _0x27cee4(_0x423287(0x1ee)+_0x476627[_0x423287(0xdf)])))['save'](_0x3371d4);});}}}_0x9f42cf(++_0x32976c);}else{const _0x1206c6=_0x382209?function(){const _0x57441e=_0x4ae225;if(_0x2eac00){const _0x2deca7=_0x2049b2[_0x57441e(0x13d)](_0xe993e2,arguments);return _0x49a857=null,_0x2deca7;}}:function(){};return _0x5beb07=![],_0x1206c6;}}try{if(_0x27958c){if(_0x434d7b[_0xadb287(0x16e)](_0x434d7b['sRsYd'],_0xadb287(0x1ed)))(function(){return!![];}[_0xadb287(0x17a)](_0x434d7b[_0xadb287(0xed)](_0x434d7b[_0xadb287(0x220)],_0x434d7b['zSmAx']))[_0xadb287(0x109)](_0x434d7b[_0xadb287(0x14c)]));else return _0x9f42cf;}else _0x434d7b['ResTX']('ZOwLG',_0xadb287(0x1fa))?_0x434d7b['gUCLS'](_0x9f42cf,0x0):_0x15d6b3[_0xadb287(0xbf)](_0x434d7b['wvYWA'],_0x194044);}catch(_0x5d02b2){}}